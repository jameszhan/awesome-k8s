
### `k8s Master`节点应用配置

> `Kubernetes Master`节点的配置取决于`Kubernetes`集群中`Node`节点个数，节点数越多，需要的资源也就越多。节点数可根据需要做微调。详细参考: [利用`kubeadm`创建高可用集群](https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/high-availability/)

| `Node`节点个数  | `Master`节点配置      |
| -------------- | -------------------- |
| 1~5            | 1vCPUs 4GB Memory    |
| 6~10           | 2vCPUs 8GB Memory    |
| 11~100         | 4vCPUs 16GB Memory   |
| 101~250        | 8vCPUs 32GB Memory   |
| 251~500        | 16vCPUs 64GB Memory  |
| 501~5000       | 32vCPUs 128GB Memory |

#### `Kubernetes`官方推荐的约束：
- 每个节点的`Pod`数量不超过`100`
- 节点数不超过`5000`
- `Pod`总数不超过`150000`
- 容器总数不超过`300000`

### `etcd`硬件配置示例

> 请注意，这些配置是假设机器资源完全供`etcd`使用的情况，如果在机器上同时运行其他应用程序，可能会产生资源争夺从而导致集群不稳定

#### 小型集群

小型集群是指可以服务于不超过`100`个客户端，请求数小于`200个/秒`，同时存储的数据不超过`100MB`的`etcd`集群。

以下示例是`50节点`的`Kubernetes`集群：

| 供应商 | 类型                      | vCPUS | 内存（GB） | 最大并行IOPS | 磁盘带宽（MB/s） |
| ------ | ------------------------- | ----- | ---------- | ------------ | ---------------- |
| AWS    | m4.large                  | 2     | 8          | 3600         | 56.25            |
| GCE    | n1-standard-1+50GB PD SSD | 2     | 7.5        | 1500         | 25               |

#### 中型集群

中型集群是指可以服务于不超过`500`个客户端，请求数小于`1000个/秒`，同时存储数据不超过`500MB`的`etcd`集群。

以下示例是`250节点`的`Kubernetes`集群：

| 供应商 | 类型                       | vCPUS | 内存（GB） | 最大并行IOPS | 磁盘带宽（MB/s） |
| ------ | -------------------------- | ----- | ---------- | ------------ | ---------------- |
| AWS    | m4.xlarge                  | 4     | 16         | 6000         | 93.75            |
| GCE    | n1-standard-4+150GB PD SSD | 5     | 15         | 4500         | 75               |

#### 大型集群

大型集群是指可以服务于不超过`1500`个客户端，请求数小于`10000个/秒`，同时存储数据不超过`1GB`的`etcd`集群。

以下示例是`1000节点`的`Kubernetes`集群：

| 供应商 | 类型                       | vCPUS | 内存（GB） | 最大并行IOPS | 磁盘带宽（MB/s） |
| ------ | -------------------------- | ----- | ---------- | ------------ | ---------------- |
| AWS    | m4.2xlarge                 | 8     | 32         | 8000         | 125              |
| GCE    | n1-standard-8+250GB PD SSD | 8     | 30         | 7500         | 125              |

#### 超大型集群

超大型集群是指可以服务于超过`1500`个客户端，请求数超过`10000个/秒`，存储数据可以超过`1GB`的`etcd`集群。

以下示例是`3000节点`的`Kubernetes`集群：

| 供应商 | 类型                        | vCPUS | 内存（GB） | 最大并行IOPS | 磁盘带宽（MB/s） |
| ------ | --------------------------- | ----- | ---------- | ------------ | ---------------- |
| AWS    | m4.4xlarge                  | 16    | 64         | 16000        | 250              |
| GCE    | n1-standard-16+500GB PD SSD | 16    | 60         | 15000        | 250              |

